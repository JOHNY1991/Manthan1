<script>

    function on_submit_click(id) {

        $.ajax({
            type:"POST",
            url:"<%=update_receiver_teams_url%>",
            data:{receiver_name:$("#input_" + id.toString()).val(), id:id },
            success:function (data, textStatus) {
                if(data['status'] == 'true'){
                    $("#" + data['id']).parent().html(data['message']);
                    $("#input_"+data['id']).parent().html(data['receiver']);
                }else
                {$("#notice").html(data['message']);
                }
            },
            dataType:'json'
        });
        return false;
    }
    $(document).ready(function () {
        $('#teams').dataTable({
        });
    });

</script>

<table id="teams" cellpadding="0" cellspacing="0" border="0" class="table table-bordered">
  <thead>
  <tr>
    <th>Team ID</th>
    <th>Team Name</th>
    <th>College</th>
    <th>Receiver Name</th>
    <th>Button</th>
    <th></th>

  </tr>
  </thead>
  <% @teams.each do |team| %>
      <tr>
        <td><%= team.team_id %></td>
        <td><%= team.name %></td>
        <td><%= team.college %></td>
        <% if team.receiver.blank? then %>
            <td>
              <div class="field"><input id="input_<%= team.id %>" type="text"></div>
            </td>
            <td>
              <div class="actions">
                <input name="id" id="<%= team.id %>" receiver="" type="submit" value="Submit" onclick="on_submit_click(<%= team.id%>);"></div>
            </td>
        <% else %>
            <td>
              <div class="field"><%= team.receiver %></div>
            </td>
            <td>
              <div class="actions">
                Accepted
              </div>
            </td>

        <% end %>
        <td><%= link_to 'Show', team %></td>

      </tr>
  <% end %>
</table>


<br/>

<%= link_to 'New Team', new_team_path %>
